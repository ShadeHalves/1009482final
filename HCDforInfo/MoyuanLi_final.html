<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Moyuan Li Biography</title>
  <meta name="description" content="Personal academic homepage of Moyuan Li—microfluidic impedance cytometry, machine learning and fluid analytics; experiments, projects, and lab links." />
  <link rel="icon" href="HCDforInfo/assets/pic1.jpg" />
  <style>
    /* ===== Design tokens ===== */
    :root {
      --bg: #ffffff;         /* page background */
      --panel: #ffffff;      /* card/bg */
      --text: #111827;       /* foreground */
      --muted: #6b7280;
      --brand: #2563eb;      /* blue */
      --accent: #16a34a;     /* green */
      --warn: #d97706;       /* amber */
      --border: #e5e7eb;     /* subtle border */
      --radius: 14px;        /* rounded corners */
      --shadow: 0 10px 28px rgba(15,23,42,.08);
    }

    /* Base */
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;color:var(--text);background:var(--bg);
      font:16px/1.65 system-ui,-apple-system,Segoe UI,Roboto,PingFang SC,Noto Sans SC,sans-serif}
    img{max-width:100%;display:block}
    a{color:var(--brand);text-decoration:none}
    a:hover{text-decoration:underline}
    code,kbd{background:#0f172a;border:1px solid var(--border);padding:.1em .35em;border-radius:6px}

    /* Layout */
    .container{max-width:1100px;margin:0 auto;padding:24px}
    header{position:sticky;top:0;z-index:50;background:rgba(17,24,39,.82);backdrop-filter:blur(6px);border-bottom:1px solid var(--border)}
    nav{display:flex;gap:18px;align-items:center;padding:14px 24px}
    nav .brand{font-weight:800;color:#ffffff}
    nav .spacer{flex:1}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--border);border-radius:999px;background:#f9fafb;color:var(--muted)}
    .pill:hover{border-color:#cbd5f5;color:#111827}

    .hero{display:grid;grid-template-columns: 1.1fr .9fr;gap:22px;margin:22px 0;padding:22px;border:1px solid var(--border);border-radius:var(--radius);background:#f9fafb;box-shadow:var(--shadow)}
    .hero h1{margin:.1em 0 .3em;font-size:40px;line-height:1.15}
    .tag{display:inline-block;padding:.35em .7em;border-radius:999px;border:1px solid var(--border);background:#eff6ff;color:var(--muted);margin-right:8px}
    .cta{display:inline-flex;align-items:center;gap:10px;padding:10px 14px;border-radius:12px;border:1px solid var(--border);background:#111827;color:#f9fafb;box-shadow:var(--shadow)}
    .cta:hover{transform:translateY(-1px);border-color:#93c5fd}

    .grid{display:grid;gap:18px;grid-template-columns:repeat(3,1fr)}
    @media (max-width: 980px){.hero{grid-template-columns:1fr}.grid{grid-template-columns:1fr 1fr}}
    @media (max-width: 660px){.grid{grid-template-columns:1fr}}

    .card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)}
    .card h3{margin:.2em 0 .4em}
    .muted{color:var(--muted)}
    .sep{height:1px;background:var(--border);border:none;margin:28px 0}

    /* Gallery + filter + lightbox */
    .filters{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:12px}
    .filter-btn{cursor:pointer}
    .gallery{display:grid;gap:14px;grid-template-columns:repeat(3,1fr)}
    @media (max-width: 900px){.gallery{grid-template-columns:1fr 1fr}}
    @media (max-width: 620px){.gallery{grid-template-columns:1fr}}
    .thumb{position:relative;border-radius:12px;overflow:hidden;border:1px solid var(--border);background:#f9fafb;
          display: flex;
          flex-direction: column;
          justify-content: center;   /* vertically center img + caption */
          align-items: center;        /* horizontally center */
          padding: 10px;
          }
    .thumb figcaption{position:absolute;left:0;right:0;bottom:0;background:linear-gradient(180deg,transparent,rgba(0,0,0,.65));padding:8px 10px;font-size:14px}

    .lightbox{position:fixed;inset:0;background:rgba(0,0,0,.8);display:none;align-items:center;justify-content:center;padding:20px}
    .lightbox.open{display:flex}
    .lightbox img{max-width:92vw;max-height:84vh;border-radius:12px;border:1px solid var(--border)}
    .lightbox .close{position:absolute;top:14px;right:16px}
    .icon-btn{cursor:pointer;border:1px solid var(--border);background:#0f172a;border-radius:10px;padding:8px 10px;color:#e5e7eb}

    /* M20 tooltip + view toggle */
    .m20-tooltip{
      position:fixed;
      pointer-events:none;
      background:rgba(15,23,42,.95);
      color:#e5e7eb;
      padding:6px 8px;
      border-radius:6px;
      border:1px solid var(--border);
      font-size:12px;
      z-index:1000;
      opacity:0;
      transition:opacity .12s ease-out;
      white-space:nowrap;
    }
    .m20-toggle{
      display:flex;
      align-items:center;
      gap:8px;
      margin-bottom:8px;
      font-size:12px;
      color:var(--muted);
    }
    .m20-toggle button{
      cursor:pointer;
      border-radius:999px;
      border:1px solid var(--border);
      background:#0f172a;
      color:var(--muted);
      padding:4px 10px;
      font-size:12px;
    }
    .m20-toggle button.active{
      background:var(--brand);
      color:#0b1120;
      border-color:var(--brand);
    }

    /* Back-to-top buttons on cards */
    .back-top-wrap{
      margin-top:12px;
      text-align:right;
    }
    .back-top-btn{
      cursor:pointer;
      border-radius:999px;
      border:1px solid var(--border);
      background:#f9fafb;
      color:var(--muted);
      padding:4px 10px;
      font-size:12px;
    }
    .back-top-btn:hover{
      background:#eff6ff;
      color:#111827;
      border-color:#93c5fd;
    }

    /* Before/After slider (non-graph interactivity) */
    .ba{position:relative;border-radius:12px;overflow:hidden;border:1px solid var(--border);height:280px}
    .ba img{position:absolute;inset:0;height:100%;width:100%;object-fit:cover}
    .ba .after{clip-path: inset(0 0 0 50%)}
    .ba .handle{position:absolute;top:0;bottom:0;left:50%;width:2px;background:rgba(255,255,255,.8)}
    .range{width:100%}

    footer{color:var(--muted);text-align:center;padding:30px 10px}
  </style>
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
  <header>
    <nav class="container" aria-label="Primary">
      <span class="brand">Moyuan Li Bio</span>
      <a class="pill" href="#about">About</a>
      <a class="pill" href="#research">Research Focus</a>
      <a class="pill" href="#gallery">Experiments</a>
      <a class="pill" href="#projects">Projects</a>
      <a class="pill" href="#contact">Contact</a>
      <span class="spacer"></span>
      <a class="pill" href="https://people.sutd.edu.sg/~ye_ai/" target="_blank" rel="noreferrer noopener">Microfluidics Lab Website &rarr;</a>
    </nav>
  </header>

  <main class="container">
    <!-- ===== Hero / Intro ===== -->
    <section class="hero" id="about">
      <div>
        <span class="tag">Academic Homepage</span>
        <span class="tag">Research and Projects</span>
        <h1>Moyuan's Homepage</h1>
        <p class="muted" style="text-align: justify;">
          I am going to present: a concise narrative about my academic direction, selected experiment visuals, 
          links to my lab, and representative past projects. Interactive components are lightweight (gallery filtering, 
          image lightbox, and data visualization). More interactive charts involved later.</p>
        <p>
          <a class="cta" href="#research">Read More &darr;</a>
        </p>
      </div>
      <figure class="card" aria-label="Portrait or lab photo placeholder">
        <img src="assets/welcome.jpg" alt="Portrait or laboratory placeholder image" />
        <figcaption class="muted" style="margin-top:8px">Personal Info: PhD. Moyuan Li 1009482 EPD, Beats Lab Blk 2.713.</figcaption>
      </figure>
    </section>

    <!-- ===== Research Focus / Narrative ===== -->
    <section class="card" id="research" aria-label="Research focus">
      <h2>Research Focus</h2>
      <p style="text-align: justify;">
        <strong>Direction.</strong> My current lab work centres on microfluidic impedance cytometry for single-cell analysis. 
        I design and operate multi-electrode chips to measure live and fixed Jurkat cells and reference beads at multiple frequencies, with a particular focus on double-differential 
        seven-electrode configurations. By tracking amplitude, phase, and opacity across low and high frequencies, I aim to separate cell populations by viability and biophysical state in a label-free manner.
      </p>
      <p style="text-align: justify;">
        <strong>Approach.</strong> A large part of my work is devoted to making these measurements quantitative and reproducible. I develop calibration pipelines using polystyrene beads, robust signal 
        processing (filtering, peak detection, baseline correction), and iterative EM-based size and PF (phase/geometry) correction. On top of the hardware and calibration, I build Python and machine-learning workflows to clean events, derive size and opacity 
        features, and evaluate classifiers for reliable live–dead discrimination. In the long term, I am interested in connecting these microfluidic tools with broader data-driven analysis pipelines for both biomedical experiments and semiconductor-style process 
        monitoring.
      </p>
      <div class="grid" style="margin-top:10px;display:none">
        <article class="card" style="text-align: center;">
          <h3>Objective A</h3>
          <p class="muted">
            <strong>Microfluidic Impedance Cytometry</strong> Develop robust multi-electrode impedance cytometry methods to quantify single-cell viability and biophysical properties through calibrated, multi-frequency electrical signatures.</p>
        </article>
        <article class="card" style="text-align: center;">
          <h3>Objective B</h3>
          <p class="muted">
            <strong>Signal Processing & Calibration</strong> Design reproducible pipelines for peak detection, baseline correction, bead-based calibration, and EM-driven PF/size correction to ensure accurate, interpretable cellular measurements.</p>
        </article>
        <article class="card" style="text-align: center;">
          <h3>Objective C</h3>
          <p class="muted">
            <strong>Machine learning for Data Processing</strong> Build data-driven models for classifying cells, analyzing semiconductor datasets, and linking experimental signals to reliable, scalable decision-making frameworks.</p>
        </article>
      </div>
    </section>

    <hr class="sep" />

    <!-- ===== Experiments Gallery (filter + lightbox) ===== -->
    <section id="gallery" class="card" aria-label="Experiment visuals">
      <h2>Experiment Visuals</h2>
      <p class="muted"> PIC Demonstration related to different research and projects. Click to browse categories/ images to open the lightbox.</p>
      <div class="filters" role="toolbar" aria-label="Gallery filters">
        <button class="pill filter-btn" data-filter="all">All</button>
        <button class="pill filter-btn" data-filter="microfluidics">Microfluidics</button>
        <button class="pill filter-btn" data-filter="soft lithography">Soft Lithography</button>
        <button class="pill filter-btn" data-filter="ml">Machine Learning</button>
      </div>
      <div class="gallery" id="galleryGrid">
        <figure class="thumb" data-cat="microfluidics">
          <img src="assets/mfl1.jpg" alt="Microfluidics setup placeholder" />
          <figcaption>7E Impedance cytometry—chip device.</figcaption>
        </figure>
        <figure class="thumb" data-cat="soft lithography">
          <img src="assets/sl1.jpg" alt="Wafer inspection placeholder" />
          <figcaption>Photolithography wafer.</figcaption>
        </figure>
        <figure class="thumb" data-cat="ml">
          <img src="assets/pic1.jpg" alt="ML pipeline placeholder" />
          <figcaption>ML pipeline.</figcaption>
        </figure>
        <figure class="thumb" data-cat="soft lithography">
          <img src="assets/sl3.jpg" alt="Electrodes fabrication placeholder" />
          <figcaption>Electrode fabrication ?Lift-off.</figcaption>
        </figure>
        <figure class="thumb" data-cat="microfluidics">
          <img src="assets/mfl2.jpg" alt="Microchannel setup placeholder" />
          <figcaption>Microchannel and bonding.</figcaption>
        </figure>
        <figure class="thumb" data-cat="ml">
          <img src="assets/pic2.png" alt="1D CNN placeholder" />
          <figcaption>CNN framework.</figcaption>
        </figure>
      </div>
    </section>

    <hr class="sep" />

    <!-- ===== Before/After slider (non-graph interactive) ===== -->
    <section class="card" aria-label="Before/After visual">
      <h2>Signal Processing Before/After (Example Visual)</h2>
      <p class="muted">Signal Proceesing: Butterworth filtering & SG baseline correction.</p>
      <div class="ba" id="ba">
        <img class="before" src="assets/sp1.png" alt="Before placeholder" />
        <img class="after"  src="assets/sp4.jpg" alt="After placeholder" />
        <div class="handle" id="handle" aria-hidden="true"></div>
      </div>
      <label for="slider" class="muted" style="display:block;margin-top:10px">Reveal: <span id="pct">50</span>%</label>
      <input class="range" type="range" id="slider" min="0" max="100" value="50" />
    </section>

    <!-- ===== Projects showcase ===== -->
    <section id="projects-old" class="card" aria-label="Project showcase" style="display:none">
      <h2>Cell Size Calibration with Position Factor: Cell Size Distribution</h2>
      <div class="grid" style="margin-top:10px">
        <article class="card">
          <h3>Project One</h3>
          <p class="muted">One-sentence project blurb. Include scope, dataset, or result. <a href="https://github.com/your-username/your-repo" target="_blank" rel="noreferrer noopener">GitHub &rarr;</a></p>
        </article>
        <article class="card">
          <h3>Project Two</h3>
          <p class="muted">One-sentence project blurb. <a href="https://your-demo-link.example.com" target="_blank" rel="noreferrer noopener">Demo &rarr;</a></p>
        </article>
        <article class="card">
          <h3>Project Three</h3>
          <p class="muted">One-sentence project blurb. <a href="https://arxiv.org/abs/XXXX.XXXXX" target="_blank" rel="noreferrer noopener">Paper &rarr;</a></p>
        </article>
      </div>
    </section>

    <hr class="sep" />

    <!-- ===== Cell size distribution (PF-calibrated) ===== -->
    <section id="projects" class="card" aria-label="Cell size distribution after PF calibration">
      <h2>Cell Size Distribution After PF Calibration</h2>
      <p class="muted">
        Histogram of PF-calibrated cell sizes from M20 project module, with Gaussian fit overlaid.
        The data are loaded from <code>m20_cells_hist_gauss.json</code> generated by the Spyder.
      </p>
      <div id="m20Viz" style="width:100%;height:420px"></div>
    </section>

    <hr class="sep" />

    <!-- ===== Contact ===== -->
    <section id="contact" class="card" aria-label="Contact">
      <h2>Contact</h2>
      <p class="muted">
        Email: <a href="mailto:your.name@university.edu">moyuan_li@mymail.sutd.edu.sg</a> 
        · Github: 
        <a href="https://github.com/ShadeHalves" target="_blank" rel="noreferrer noopener">
          https://github.com/ShadeHalves
        </a>
      </p>
    </section>

    <footer>
      <p>&copy; <span id="year"></span> All images are original and produced by Moyuan Li.</p>
    </footer>
  </main>

  <!-- ===== Light interactivity (no charts) ===== -->
  <div class="lightbox" id="lightbox" aria-modal="true" role="dialog" aria-label="Image viewer">
    <button class="icon-btn close" id="closeLb" aria-label="Close">×</button>
    <img id="lbImg" alt="Expanded visual" />
  </div>

  <script>
    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Back-to-top buttons on section cards
    document.querySelectorAll('section.card').forEach(section => {
      const wrap = document.createElement('div');
      wrap.className = 'back-top-wrap';
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.className = 'back-top-btn';
      btn.textContent = 'Back to top';
      btn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
      wrap.appendChild(btn);
      section.appendChild(wrap);
    });

    // ===== Gallery filter =====
    const grid = document.getElementById('galleryGrid');
    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const cat = btn.dataset.filter;
        grid.querySelectorAll('.thumb').forEach(fig => {
          const match = cat === 'all' || fig.dataset.cat === cat;
          fig.style.display = match ? '' : 'none';
        });
      });
    });

    // ===== Lightbox =====
    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lbImg');
    const closeLb = document.getElementById('closeLb');

    grid.addEventListener('click', (e) => {
      const fig = e.target.closest('.thumb');
      if (!fig) return;
      const img = fig.querySelector('img');
      if (!img) return;
      lbImg.src = img.src;
      lb.classList.add('open');
    });
    closeLb.addEventListener('click', () => lb.classList.remove('open'));
    lb.addEventListener('click', (e) => { if (e.target === lb) lb.classList.remove('open'); });
    window.addEventListener('keydown', (e) => { if (e.key === 'Escape') lb.classList.remove('open'); });

    // ===== Before/After slider =====
    const slider = document.getElementById('slider');
    const after = document.querySelector('.ba .after');
    const handle = document.getElementById('handle');
    const pct = document.getElementById('pct');
    function updateBA(v){
      const p = Number(v);
      pct.textContent = p;
      after.style.clipPath = `inset(0 0 0 ${p}%)`;
      handle.style.left = p + '%';
    }
    slider.addEventListener('input', (e) => updateBA(e.target.value));
    updateBA(slider.value);

    // ===== M20 cell size histogram (D3, JSON) =====
    (function () {
      const container = d3.select('#m20Viz');
      if (container.empty()) return;

      // Tooltip for hover details
      const tooltip = d3.select('body')
        .append('div')
        .attr('class', 'm20-tooltip');

      // View toggle (histogram vs scatter)
      const toggleWrap = container.append('div')
        .attr('class', 'm20-toggle');

      toggleWrap.append('span').text('View:');

      const modes = [
        { id: 'hist', label: 'Histogram' },
        { id: 'scatter', label: 'Scatter' }
      ];
      let currentMode = 'hist';

      const modeButtons = toggleWrap.selectAll('button')
        .data(modes)
        .enter()
        .append('button')
        .attr('type', 'button')
        .classed('active', d => d.id === currentMode)
        .text(d => d.label);

      const width = 800;
      const height = 360;
      const margin = { top: 20, right: 20, bottom: 50, left: 60 };

      const svg = container.append('svg')
        .attr('viewBox', `0 0 ${width} ${height}`)
        .attr('width', '100%')
        .attr('height', '100%');

      const plotWidth = width - margin.left - margin.right;
      const plotHeight = height - margin.top - margin.bottom;

      const g = svg.append('g')
        .attr('transform', `translate(${margin.left},${margin.top})`);

      d3.json('m20_cells_hist_gauss.json').then(data => {
        if (!data || !data.length) return;

        const x = d3.scaleLinear()
          .domain([
            d3.min(data, d => d.bin_left),
            d3.max(data, d => d.bin_right)
          ])
          .range([0, plotWidth]);

        const y = d3.scaleLinear()
          .domain([
            0,
            d3.max(data, d => Math.max(d.density_pfcal || 0, d.gauss_pfcal || 0))
          ])
          .nice()
          .range([plotHeight, 0]);

        function updateTooltip(event, d) {
          const density = d.density_pfcal || 0;
          const gauss = d.gauss_pfcal || 0;
          tooltip
            .style('opacity', 1)
            .style('left', (event.clientX + 12) + 'px')
            .style('top', (event.clientY + 12) + 'px')
            .html(
              `Bin: ${d.bin_left.toFixed(2)}?{d.bin_right.toFixed(2)} µm<br>` +
              `Density: ${density.toFixed(3)}<br>` +
              `Gaussian: ${gauss.toFixed(3)}`
            );
        }

        function hideTooltip() {
          tooltip.style('opacity', 0);
        }

        // Bars: PF-calibrated histogram
        const bars = g.selectAll('rect.bar')
          .data(data)
          .join('rect')
          .attr('class', 'bar')
          .attr('x', d => x(d.bin_left))
          .attr('width', d => x(d.bin_right) - x(d.bin_left))
          .attr('y', d => y(d.density_pfcal || 0))
          .attr('height', d => y(0) - y(d.density_pfcal || 0))
          .attr('fill', '#60a5fa')
          .attr('opacity', 0.7)
          .on('mouseover', function (event, d) {
            d3.select(this).attr('opacity', 1);
            updateTooltip(event, d);
          })
          .on('mousemove', updateTooltip)
          .on('mouseout', function () {
            d3.select(this).attr('opacity', 0.7);
            hideTooltip();
          });

        // Gaussian fit line
        const line = d3.line()
          .x(d => x(d.bin_center))
          .y(d => y(d.gauss_pfcal || 0))
          .curve(d3.curveMonotoneX);

        const linePath = g.append('path')
          .datum(data)
          .attr('class', 'gauss-line')
          .attr('fill', 'none')
          .attr('stroke', '#f59e0b')
          .attr('stroke-width', 2)
          .attr('d', line);

        // Axes
        g.append('g')
          .attr('transform', `translate(0,${plotHeight})`)
          .call(d3.axisBottom(x));

        g.append('g')
          .call(d3.axisLeft(y));

        g.append('text')
          .attr('x', plotWidth / 2)
          .attr('y', plotHeight + 40)
          .attr('text-anchor', 'middle')
          .attr('fill', '#9aa4b2')
          .text('Size (µm)');

        g.append('text')
          .attr('transform', 'rotate(-90)')
          .attr('x', -plotHeight / 2)
          .attr('y', -45)
          .attr('text-anchor', 'middle')
          .attr('fill', '#9aa4b2')
          .text('Density');

        // Legend
        const legend = g.append('g')
          .attr('transform', `translate(${plotWidth - 210},10)`);

        const items = [
          { color: '#60a5fa', label: 'PF-calibrated histogram' },
          { color: '#f59e0b', label: 'Gaussian fit' }
        ];

        items.forEach((item, i) => {
          const row = legend.append('g')
            .attr('transform', `translate(0, ${i * 18})`);
          row.append('rect')
            .attr('width', 12)
            .attr('height', 12)
            .attr('fill', item.color)
            .attr('opacity', i === 0 ? 0.7 : 1);
          row.append('text')
            .attr('x', 18)
            .attr('y', 10)
            .attr('fill', '#111827')
            .attr('font-size', 12)
            .text(item.label);
        });

        // Scatter representation: bin centers as points
        const scatterLayer = g.append('g')
          .attr('class', 'm20-scatter');

        const scatterPoints = scatterLayer.selectAll('circle.scatter-point')
          .data(data)
          .join('circle')
          .attr('class', 'scatter-point')
          .attr('cx', d => x(d.bin_center))
          .attr('cy', d => y(d.density_pfcal || 0))
          .attr('r', 3)
          .attr('fill', '#f97316')
          .attr('opacity', 0)
          .on('mouseover', function (event, d) {
            d3.select(this).attr('r', 4);
            updateTooltip(event, d);
          })
          .on('mousemove', updateTooltip)
          .on('mouseout', function () {
            d3.select(this).attr('r', 3);
            hideTooltip();
          });

        function setMode(mode) {
          currentMode = mode;
          modeButtons.classed('active', d => d.id === currentMode);
          const showHist = currentMode === 'hist';
          bars.attr('opacity', showHist ? 0.7 : 0);
          linePath.attr('opacity', showHist ? 1 : 0);
          scatterPoints.attr('opacity', showHist ? 0 : 0.9);
        }

        setMode(currentMode);

        modeButtons.on('click', (event, d) => {
          if (d.id !== currentMode) {
            setMode(d.id);
          }
        });
      });
    })();
  </script>
</body>
</html>

